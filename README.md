# `agda-index-webui`

------------------

Messy and shameful, just like me ðŸ˜‰.

## Building

You might need to add the WASM target to your Rust toolchain:

```bash
rustup target add wasm32-unknown-unknown
```

The most straightforward way to build or serve the project is to use `trunk`:

```bash
cargo install trunk
```

The following things need to be in place:
 - `indexed.txt` must contain the output of `agda-index`.
 - The HTML generated by `agda --html` must be in a subdirectory of `agda-html`, e.g. I used `agda-html/cubical`.
 - In `config.rs`, customize `OLD_PREFIX` with whatever `agda-index` put as a prefix in `indexed.txt`, and `PREFIX` with the position of your `agda-html` subdirectory relative to the root of the server.

Finally we can build and serve with:
```bash
trunk serve
```
This will serve the project at `127.0.0.1:8080`, and watch the code for changes. If you wish to generate a static site, you can use:
```bash
trunk build --release
```
This will generate a static site in `dist/`. In order to use it, you must still serve it with some server such as a:
```bash
python3 -m http.server
```
Otherwise CORS will sting you in the ass.

## Caveats

Everything is slow, unoptimized and dirty. In particular, the page process could get stuck.